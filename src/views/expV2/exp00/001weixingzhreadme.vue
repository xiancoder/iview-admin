<template>
    <div class="blogCss">
        <div class="blog">
            <div class="blogTitle">微信公众平台开发概述</div>
            <div class="blogContent" v-highlight>
                <p>
                    为了识别用户，<b class="text-danger">每个用户针对每个公众号会产生一个安全的OpenID</b>，如果需要在多公众号、移动应用之间做用户共通，则需前往微信开放平台，将这些公众号和应用绑定到一个开放平台账号下，绑定后，一个用户虽然对多个公众号和应用有多个不同的OpenID，但<b class="text-danger">他对所有这些同一开放平台账号下的公众号和应用，只有一个UnionID</b>，可以在用户管理-获取用户基本信息（UnionID机制）文档了解详情。
                    请开发者注意： 1、微信公众平台开发是指为微信公众号进行业务开发，为移动应用、PC端网站、公众号第三方平台（为各行各业公众号运营者提供服务）的开发，请前往微信开放平台接入。 2、在申请到认证公众号之前，你可以<b class="text-danger">先通过测试号申请系统</b>，快速申请一个接口测试号，立即开始接口测试开发。 3、在开发过程中，可以使用<b class="text-danger">接口调试工具来在线调试</b>某些接口。 4、每个接口都有<b class="text-danger">每日接口调用频次限制</b>，可以在公众平台官网-开发者中心处查看具体频次。 5、在开发出现问题时，可以通过接口调用的返回码，以及报警排查指引（在公众平台官网-开发者中心处可以设置接口报警），来发现和解决问题。 6、公众平台以access_token为接口调用凭据，来调用接口，<b class="text-danger">所有接口的调用需要先获取access_token，access_token在2小时内有效</b>，过期需要重新获取，但<b class="text-danger">1天内获取次数有限，开发者需自行存储</b>，详见获取接口调用凭据（access_token）文档。 7、公众平台接口调用<b class="text-danger">仅支持80端口</b>。
                    公众号主要通过公众号消息会话和公众号内网页来为用户提供服务的，下面分别介绍这两种情况： 1、公众号消息会话 公众号是以微信用户的一个联系人形式存在的，消息会话是公众号与用户交互的基础。目前公众号内主要有这样几类消息服务的类型，分别用于不同的场景。 1）群发消息：<b class="text-danger">公众号可以以一定频次（订阅号为每天1次，服务号为每月4次），向用户群发消息</b>，包括文字消息、图文消息、图片、视频、语音等。 2）被动回复消息：在用户给公众号发消息后，微信服务器会将消息发到开发者预先在开发者中心设置的服务器地址（开发者需要进行消息真实性验证），公众号<del>可以</del><b class="text-danger">必须在5秒内</b>做出回复，可以回复一个消息，也可以回复命令告诉微信服务器这条消息暂不回复。被动回复消息可以设置加密（在公众平台官网的开发者中心处设置，设置后，按照消息加解密文档来进行处理。其他3种消息的调用因为是API调用而不是对请求的返回，所以不需要加解密）。 3）客服消息：<b class="text-danger">在用户给公众号发消息后的48小时内，公众号可以给用户发送不限数量的消息</b>，主要用于客服场景。用户的行为会触发事件推送，某些事件推送是支持公众号据此发送客服消息的，详见微信推送消息与事件说明文档。 4）模板消息：在需要对用户发送服务通知（如刷卡提醒、服务预约成功通知等）时，公众号可以用特定内容模板，主动向用户发送消息。 2、公众号内网页 许多复杂的业务场景，需要通过网页形式来提供服务，这时需要用到： 1）网页授权获取用户基本信息：通过该接口，可以获取用户的基本信息（<b class="text-danger">获取用户的OpenID是无需用户同意的，获取用户的基本信息则需用户同意</b>） 2）微信JS-SDK：是开发者<b class="text-danger">在网页上通过JavaScript代码使用微信原生功能的工具包</b>，开发者可以使用它在网页上录制和播放微信语音、监听微信分享、上传手机本地图片、拍照等许多能力。 典型案例介绍
                    不同的公众号类型具备不同的接口权限，具体如下表： 请注意： 1、<b class="text-danger">微博认证视作未认证</b>,因此微博认证的公众号不会拥有微信认证公众号特有的接口。 2、微信认证分为资质认证和名称认证两部分，只需要资质认证通过，就可获得接口。
                    接入概述 接入微信公众平台开发，开发者需要按照如下步骤完成： 1、填写服务器配置 2、验证服务器地址的有效性 3、依据接口文档实现业务逻辑 下面详细介绍这3个步骤。 第一步：填写服务器配置 登录微信公众平台官网后，在公众平台官网的开发-基本设置页面，勾选协议成为开发者，点击“修改配置”按钮，填写<b class="text-danger">服务器地址（URL）、Token和EncodingAESKey</b>，其中URL是开发者用来接收微信消息和事件的接口URL。<b class="text-danger">Token可由开发者可以任意填写，用作生成签名</b>（该Token会和接口URL中包含的Token进行比对，从而验证安全性）。<b class="text-danger">EncodingAESKey由开发者手动填写或随机生成，将用作消息体加解密密钥。</b> 同时，开发者可选择消息加解密方式：明文模式、兼容模式和安全模式。模式的选择与服务器配置在提交后都会立即生效，请开发者谨慎填写及选择。加解密方式的默认状态为明文模式，选择兼容模式和安全模式需要提前配置好相关加解密代码，详情请参考消息体签名及加解密部分的文档 。 第二步：验证消息的确来自微信服务器 开发者提交信息后，微信服务器将发送GET请求到填写的服务器地址URL上，GET请求携带参数如下表所示： 参数   描述 signature  微信加密签名，signature结合了开发者填写的token参数和请求中的timestamp参数、nonce参数。 timestamp 时间戳 nonce    随机数 echostr 随机字符串 开发者通过检验signature对请求进行校验（下面有校验方式）。若确认此次GET请求来自微信服务器，请原样返回echostr参数内容，则接入生效，成为开发者成功，否则接入失败。加密/校验流程如下： 1）将token、timestamp、nonce三个参数进行字典序排序 2）将三个参数字符串拼接成一个字符串进行sha1加密 3）开发者获得加密后的字符串可与signature对比，标识该请求来源于微信 第三步：依据接口文档实现业务逻辑 验证URL有效性成功后即接入生效，成为开发者。你可以在公众平台网站中申请微信认证，认证成功后，将获得更多接口权限，满足更多业务需求。 成为开发者后，用户每次向公众号发送消息、或者产生自定义菜单、或产生微信支付订单等情况时，开发者填写的服务器配置URL将得到微信服务器推送过来的消息和事件，开发者可以依据自身业务逻辑进行响应，如回复消息。 公众号调用各接口时，一般会获得正确的结果，具体结果可见对应接口的说明。返回错误时，可根据返回码来查询错误原因。全局返回码说明 用户向公众号发送消息时，公众号方收到的消息发送者是一个OpenID，是使用用户微信号加密后的结果，<b class="text-danger">每个用户对每个公众号有一个唯一的OpenID</b>。 此外，由于开发者经常有需在多个平台（移动应用、网站、公众帐号）之间共通用户帐号，统一帐号体系的需求，<b class="text-danger">微信开放平台（open.weixin.qq.com）提供了UnionID机制</b>。开发者可通过OpenID来获取用户基本信息，而如果开发者拥有多个应用（移动应用、网站应用和公众帐号，公众帐号只有在被绑定到微信开放平台帐号下后，才会获取UnionID），可通过获取用户基本信息中的UnionID来区分用户的唯一性，因为只要是同一个微信开放平台帐号下的移动应用、网站应用和公众帐号，用户的UnionID是唯一的。换句话说，同一用户，对同一个微信开放平台帐号下的不同应用，UnionID是相同的。详情请在微信开放平台的资源中心-移动应用开发-微信登录-授权关系接口调用指引-获取用户个人信息（UnionID机制）中查看。 另请注意，<b class="text-danger">微信公众号接口必须以http://或https://开头，分别支持80端口和443端口。</b>
                    公众平台接口域名说明 开发者可以根据自己的服务器部署情况，选择最佳的接入点（延时更低，稳定性更高）。除此之外，可以将其他接入点<b class="text-danger">用作容灾用途</b>，当网络链路发生故障时，可以考虑选择备用接入点来接入。 通用域名(api.weixin.qq.com)，使用该域名将访问官方指定就近的接入点； 通用异地容灾域名(api2.weixin.qq.com)，当上述域名不可访问时可改访问此域名； 上海域名(sh.api.weixin.qq.com)，使用该域名将访问上海的接入点； 深圳域名(sz.api.weixin.qq.com)，使用该域名将访问深圳的接入点； 香港域名(hk.api.weixin.qq.com)，使用该域名将访问香港的接入点。
                    access_token是公众号的全局唯一接口调用凭据，公众号调用各接口时都需使用access_token。开发者需要进行妥善保存。access_token的存储至少要保留512个字符空间。<b class="text-danger">access_token的有效期目前为2个小时</b>，需<b class="text-danger">定时</b>刷新，<b class="text-danger">重复获取将导致上次获取的access_token失效</b>。 公众平台的API调用所需的access_token的使用及生成方式说明： 1、建议公众号开发者使用中控服务器统一获取和刷新access_token，其他业务逻辑服务器所使用的access_token均来自于该中控服务器，不应该各自去刷新，否则容易造成冲突，导致access_token覆盖而影响业务； 2、目前access_token的有效期通过返回的expire_in来传达，目前是7200秒之内的值。中控服务器需要根据这个有效时间提前去刷新新access_token。在刷新过程中，中控服务器可对外继续输出的老access_token，此时公众平台后台会保证在5分钟内，新老access_token都可用，这保证了第三方业务的平滑过渡； 3、access_token的有效时间可能会在未来有调整，所以中控服务器不仅需要内部定时主动刷新，还需要提供被动刷新access_token的接口，这样便于业务服务器在API调用获知access_token已超时的情况下，可以触发access_token的刷新流程。 公众号和小程序均可以使用AppID和AppSecret调用本接口来获取access_token。AppID和AppSecret可在“微信公众平台-开发-基本配置”页中获得（需要已经成为开发者，且帐号没有异常状态）。**调用接口时，请登录“微信公众平台-开发-基本配置”提前将服务器IP地址添加到IP白名单中，点击查看设置方法，否则将无法调用成功。**小程序无需配置IP白名单。 接口调用请求说明 https请求方式: GET https://api.weixin.qq.com/cgi-bin/token?grant_type=client_credential&appid=APPID&secret=APPSECRET 参数说明 参数  是否必须    说明 grant_type 是  获取access_token填写client_credential appid 是  第三方用户唯一凭证 secret   是  第三方用户唯一凭证密钥，即appsecret 返回说明 正常情况下，微信会返回下述JSON数据包给公众号： {"access_token":"ACCESS_TOKEN","expires_in":7200} 参数说明 参数    说明 access_token   获取到的凭证 expires_in 凭证有效时间，单位：秒 错误时微信会返回错误码等信息，JSON数据包示例如下（该示例为AppID无效错误）: {"errcode":40013,"errmsg":"invalid appid"} 返回码说明 返回码   说明 -1 系统繁忙，此时请开发者稍候再试 0 请求成功 40001  AppSecret错误或者AppSecret不属于这个公众号，请开发者确认AppSecret的正确性 40002  请确保grant_type字段值为client_credential 40164 调用接口的IP地址不在白名单中，请在接口IP白名单中进行设置。（小程序及小游戏调用不要求IP地址在白名单内。）
                    由于用户体验和安全性方面的考虑，微信公众号的注册有一定门槛，某些高级接口的权限需要微信认证后才可以获取。 所以，为了帮助开发者快速了解和上手微信公众号开发，熟悉各个接口的调用，我们<b class="text-danger">推出了微信公众帐号测试号，通过手机微信扫描二维码即可获得测试号。</b> https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login
                    微信公众平台已对外开放接口报警，当微信服务器向开发者推送消息失败次数达到预定阈值时，<b class="text-danger">会将报警消息发送到指定微信报警群中</b>（设置方式：公众平台->开发-运维中心->接口报警），请开发者积极主动关注报警，即时解决故障，提高微信公众号的服务质量。 为了更好地根据报警信息尾部的实例（提供了openid及时间戳stamp）进行问题排查，开发者需要在接入层、逻辑层等每一个层级都加上包含关键信息的详细日志，以利于快速定位问题。 报警目前有2类： 1.通用报警，所有开发者都需要关注。2.公众号第三方平台报警，只有在微信开放平台（open.weixin.qq.com）上申请成为公众号第三方平台的开发者，才需要关注此报警。
                    微信公众号开发需要熟悉各个接口的调用，我们推出了微信公众平台<b class="text-danger">接口在线调试工具</b>。
                    获取微信服务器IP地址 如果公众号基于安全等考虑，<b class="text-danger">需要获知微信服务器的IP地址列表，以便进行相关限制</b>，可以通过该接口获得微信服务器IP地址列表或者IP网段信息。 1. 获取微信callback IP地址 callback IP即微信调用开发者服务器所使用的出口IP。 接口调用请求说明 http请求方式: GET https://api.weixin.qq.com/cgi-bin/getcallbackip?access_token=ACCESS_TOKEN2. 获取微信API接口 IP地址 API接口IP即api.weixin.qq.com的解析地址，由开发者调用微信侧的接入IP。 接口调用请求说明 http请求方式: GET https://api.weixin.qq.com/cgi-bin/get_api_domain_ip?access_token=ACCESS_TOKEN
                    为了帮助开发者排查回调连接失败的问题，提供这个<b class="text-danger">网络检测的API</b>。它可以对开发者URL做域名解析，然后对所有IP进行一次ping操作，得到丢包率和耗时。 HTTP Post请求： https://api.weixin.qq.com/cgi-bin/callback/check?access_token=ACCESS_TOKEN
                    自定义菜单能够帮助公众号丰富界面，让用户更好更快地理解公众号的功能。请注意： 自定义菜单<b class="text-danger">最多包括3个一级菜单</b>，每个一级菜单<b class="text-danger">最多包含5个二级菜单</b>。 一级菜单<b class="text-danger">最多4个汉字</b>，二级菜单<b class="text-danger">最多7个汉字</b>，多出来的部分将会以“...”代替。 创建自定义菜单后，菜单的刷新策略是，在用户进入公众号会话页或公众号profile页时，如果发现上一次拉取菜单的请求在5分钟以前，就会拉取一下菜单，如果菜单有更新，就会刷新客户端的菜单。测试时可以尝试取消关注公众账号后再次关注，则可以看到创建后的效果。 自定义菜单接口可实现多种类型按钮，如下： <b class="text-danger">click：点击推事件用户点击click类型按钮后，微信服务器会通过消息接口推送消息类型为event的结构给开发者</b>（参考消息接口指南），并且带上按钮中开发者填写的key值，开发者可以通过自定义的key值与用户进行交互； <b class="text-danger">view：跳转URL用户点击view类型按钮后，微信客户端将会打开开发者在按钮中填写的网页URL</b>，可与网页授权获取用户基本信息接口结合，获得用户基本信息。 <b class="text-danger">scancode_push：扫码推事件用户点击按钮后，微信客户端将调起扫一扫工具</b>，完成扫码操作后显示扫描结果（如果是URL，将进入URL），且会将扫码的结果传给开发者，开发者可以下发消息。 <b class="text-danger">scancode_waitmsg：扫码推事件且弹出“消息接收中”提示框用户点击按钮后，微信客户端将调起扫一扫工具</b>，完成扫码操作后，将扫码的结果传给开发者，同时收起扫一扫工具，然后弹出“消息接收中”提示框，随后可能会收到开发者下发的消息。 <b class="text-danger">pic_sysphoto：弹出系统拍照发图用户点击按钮后，微信客户端将调起系统相机，完成拍照操作后，会将拍摄的相片发送给开发者</b>，并推送事件给开发者，同时收起系统相机，随后可能会收到开发者下发的消息。 <b class="text-danger">pic_photo_or_album：弹出拍照或者相册发图用户点击按钮后，微信客户端将弹出选择器供用户选择“拍照”或者“从手机相册选择”。</b>用户选择后即走其他两种流程。 <b class="text-danger">pic_weixin：弹出微信相册发图器用户点击按钮后，微信客户端将调起微信相册</b>，完成选择操作后，将选择的相片发送给开发者的服务器，并推送事件给开发者，同时收起相册，随后可能会收到开发者下发的消息。 <b class="text-danger">location_select：弹出地理位置选择器用户点击按钮后，微信客户端将调起地理位置选择工具</b>，完成选择操作后，将选择的地理位置发送给开发者的服务器，同时收起位置选择工具，随后可能会收到开发者下发的消息。 <b class="text-danger">media_id：下发消息（除文本消息）用户点击media_id类型按钮后，微信服务器会将开发者填写的永久素材id对应的素材下发给用户</b>，永久素材类型可以是图片、音频、视频、图文消息。请注意：永久素材id必须是在“素材管理/新增永久素材”接口上传后获得的合法id。 <b class="text-danger">view_limited：跳转图文消息URL用户点击view_limited类型按钮后，微信客户端将打开开发者在按钮中填写的永久素材id对应的图文消息URL</b>，永久素材类型只支持图文消息。请注意：永久素材id必须是在“素材管理/新增永久素材”接口上传后获得的合法id
                    开发者还可使用接口删除当前使用的自定义菜单。另请注意，在个性化菜单时，<b class="text-danger">调用此接口会删除默认菜单及全部个性化菜单。</b>
                    用户点击自定义菜单后，微信会把点击事件推送给开发者，请注意，点击菜单弹出子菜单，不会产生上报。
                    为了帮助公众号实现灵活的业务运营，微信公众平台新增了<b class="text-danger">个性化菜单接口，开发者可以通过该接口，让公众号的不同用户群体看到不一样的自定义菜单</b>。该接口开放给已认证订阅号和已认证服务号。 开发者可以通过以下条件来设置用户看到的菜单： 用户标签（开发者的业务需求可以借助用户标签来完成） 性别 手机操作系统 地区（用户在微信客户端设置的地区） 语言（用户在微信客户端设置的语言） 个性化菜单接口说明： 个性化菜单要求用户的微信客户端版本在iPhone6.2.2，Android 6.2.4以上，暂时不支持其他版本微信 菜单的刷新策略是，在用户进入公众号会话页或公众号profile页时，如果发现上一次拉取菜单的请求在5分钟以前，就会拉取一下菜单，如果菜单有更新，就会刷新客户端的菜单。测试时可以尝试取消关注公众账号后再次关注，则可以看到创建后的效果 普通公众号的个性化菜单的新增接口<b class="text-danger">每日限制次数为2000次，删除接口也是2000次，测试个性化菜单匹配结果接口为20000次 </b>出于安全考虑，一个公众号的所有个性化菜单，<b class="text-danger">最多只能设置为跳转到3个域名下的链接</b> 创建个性化菜单之前必须先创建默认菜单（默认菜单是指使用普通自定义菜单创建接口创建的菜单）。如果删除默认菜单，个性化菜单也会全部删除 个性化菜单接口支持用户标签，请开发者注意，当用户身上的标签超过1个时，以最后打上的标签为匹配 个性化菜单匹配规则说明： 个性化菜单的更新是会被覆盖的。 例如公众号先后发布了默认菜单，个性化菜单1，个性化菜单2，个性化菜单3。那么当用户进入公众号页面时，将从个性化菜单3开始匹配，如果个性化菜单3匹配成功，则直接返回个性化菜单3，否则继续尝试匹配个性化菜单2，直到成功匹配到一个菜单。 根据上述匹配规则，<b class="text-danger">为了避免菜单生效时间的混淆，决定不予提供个性化菜单编辑API，开发者需要更新菜单时，需将完整配置重新发布一轮。</b>
                    当普通微信用户向公众账号发消息时，微信服务器将POST消息的XML数据包到开发者填写的URL上。 请注意： 关于重试的消息排重，推荐使用<b class="text-danger">msgid排重</b>。 微信服务器在五秒内收不到响应会断掉连接，并且重新发起请求，<b class="text-danger">总共重试三次</b>。假如服务器无法保证在五秒内处理并回复，可以直接回复空串，微信服务器不会对此作任何处理，并且不会发起重试。详情请见“发送消息-被动回复消息”。 如果开发者需要对用户消息在5秒内立即做出回应，即使用“发送消息-被动回复消息”接口向用户被动回复消息时，可以在 公众平台官网的开发者中心处设置消息加密。开启加密后，用户发来的消息和开发者回复的消息都会被加密（但开发者通过客服接口等API调用形式向用户发送消息，则不受影响）。
                    在微信用户和公众号产生交互的过程中，用户的某些操作会使得微信服务器通过事件推送的形式通知到开发者在开发者中心处设置的服务器地址，从而开发者可以获取到该信息。其中，某些事件推送在发生后，是允许开发者回复用户的，某些则不允许，详细内容如下： 目录 1 关注/取消关注事件 2 扫描带参数二维码事件 3 上报地理位置事件 4 自定义菜单事件 5 点击菜单拉取消息时的事件推送 6 点击菜单跳转链接时的事件推送 <b class="text-danger">关注/取消关注事件</b> 用户在关注与取消关注公众号时，微信会把这个事件推送到开发者填写的URL。方便开发者给用户下发欢迎消息或者做帐号的解绑。为保护用户数据隐私，开发者收到用户取消关注事件时需要删除该用户的所有信息。 <b class="text-danger">微信服务器在五秒内收不到响应会断掉连接</b>，并且重新发起请求，总共重试三次。 关于重试的消息排重，推荐使用FromUserName + CreateTime 排重。 假如服务器无法保证在五秒内处理并回复，可以直接回复空串，微信服务器不会对此作任何处理，并且不会发起重试。
                    当用户发送消息给公众号时（或某些特定的用户操作引发的事件推送时），会产生一个POST请求，开发者可以在响应包（Get）中返回特定XML结构，来对该消息进行响应（现支持回复文本、图片、图文、语音、视频、音乐）。严格来说，发送被动响应消息其实并不是一种接口，而是对微信服务器发过来消息的一次回复。 微信服务器在将用户的消息发给公众号的开发者服务器地址（开发者中心处配置）后，微信服务器在五秒内收不到响应会断掉连接，并且重新发起请求，总共重试三次，如果在调试中，发现用户无法收到响应的消息，可以检查是否消息处理超时。关于重试的消息排重，有msgid的消息推荐使用msgid排重。事件类型消息推荐使用FromUserName + CreateTime 排重。 如果开发者希望增强安全性，可以在开发者中心处开启消息加密，这样，用户发给公众号的消息以及公众号被动回复用户消息都会继续加密，详见被动回复消息加解密说明。 假如服务器无法保证在五秒内处理并回复，必须做出下述回复，这样微信服务器才不会对此作任何处理，并且不会发起重试（这种情况下，可以使用客服消息接口进行异步回复），否则，将出现严重的错误提示。详见下面说明： 1、直接回复success（推荐方式） 2、直接回复空串（指字节长度为0的空字符串，而不是XML结构体中content字段的内容为空） <b class="text-danger">一旦遇到以下情况，微信都会在公众号会话中，向用户下发系统提示“该公众号暂时无法提供服务，请稍后再试”： 1、开发者在5秒内未回复任何内容 2、开发者回复了异常数据，比如JSON数据等</b>
                    什么是EncodingAESKey？ 微信公众平台<b class="text-danger">采用AES对称加密算法对推</b>送给公众帐号的消息体对行加密，EncodingAESKey则是加密所用的秘钥。公众帐号用此秘钥对收到的密文消息体进行解密，回复消息体也用此秘钥加密。
                    当用户和公众号产生特定动作的交互时（具体动作列表请见下方说明），微信将会把消息数据推送给开发者，开发者可以在一段时间内（目前修改<b class="text-danger">为48小时</b>）调用客服接口，通过POST一个JSON数据包来发送消息给普通用户。此接口<b class="text-danger">主要用于客服等有人工消息处理环节</b>的功能，方便开发者为用户提供更加优质的服务。 目前允许的动作列表如下（公众平台会根据运营情况更新该列表，不同动作触发后，允许的客服接口下发消息条数不同，下发条数达到上限后，会遇到错误返回码，具体请见返回码说明页）： 用户发送信息 点击自定义菜单（仅有点击推事件、扫码推事件、扫码推事件且弹出“消息接收中”提示框这3种菜单类型是会触发客服接口的） 关注公众号 扫描二维码 支付成功 用户维权 为了帮助公众号使用不同的客服身份服务不同的用户群体，客服接口进行了升级，开发者可以管理客服账号，并设置客服账号的头像和昵称。该能力针对所有拥有客服接口权限的公众号开放。 另外，请开发者注意，本接口中所有使用到media_id的地方，现在都可以使用素材管理中的永久素材media_id了。
                    在公众平台网站上，为订阅号提供了每天一条的群发权限，为服务号提供每月（自然月）4条的群发权限。而对于某些具备开发能力的公众号运营者，可以通过高级群发接口，实现更灵活的群发能力。 请注意： 对于认证订阅号，群发接口每天可成功调用1次，此次群发可选择发送给全部用户或某个标签； <b class="text-danger">对于认证服务号虽然开发者使用高级群发接口的每日调用限制为100次，但是用户每月只能接收4条</b>，无论在公众平台网站上，还是使用接口群发，用户每月只能接收4条群发消息，<b class="text-danger">多于4条的群发将对该用户发送失败</b>； 开发者可以使用预览接口校对消息样式和排版，通过预览接口可发送编辑好的消息给指定用户校验效果； 群发过程中，微信后台会自动进行图文消息原创校验，请提前设置好相关参数(send_ignore等)； 开发者可以主动设置 clientmsgid 来避免重复推送。 群发接口每分钟限制请求60次，超过限制的请求会被拒绝。 图文消息正文中插入自己帐号和其他公众号已群发文章链接的能力。
                    模板消息仅用于公众号向用户发送重要的服务通知，只能用于符合其要求的服务场景中，如信用卡刷卡通知，商品购买成功通知等。<b class="text-danger">不支持广告等营销类消息以及其它所有可能对用户造成骚扰的消息。</b> 关于使用规则，请注意： 所有服务号都可以在功能->添加功能插件处看到申请模板消息功能的入口，但只有<b class="text-danger">认证后的服务号才可以申请模板消息的使用权限并获得该权限</b>； 需要选择公众账号服务所处的2个行业，每月可更改1次所选行业； 在所选择行业的模板库中选用已有的模板进行调用； 每个账号可以同时使用25个模板。 当前每个账号的模板消息的日调用上限为10万次，单个模板没有特殊限制。【2014年11月18日将接口调用频率从默认的日1万次提升为日10万次，可在MP登录后的开发者中心查看】。当账号粉丝数超过10W/100W/1000W时，模板消息的日调用上限会相应提升，以公众号MP后台开发者中心页面中标明的数字为准。 关于接口文档，请注意： <b class="text-danger">模板消息调用时主要需要模板ID和模板中各参数的赋值内容； 模板中参数内容必须以".DATA"结尾，否则视为保留字； 模板保留符号""。</b>
                    开发者可以通过一次性订阅消息授权让微信用户授权第三方移动应用（接入说明）或公众号，获得发送一次订阅消息给到授权微信用户的机会。授权微信用户可以不需要关注公众号。微信用户每授权一次，开发者可获得一次下发消息的权限。（注意：同一用户在同一scene场景值下的多次授权不累积下发权限，只能下发一条。若要订阅多条，需要不同scene场景值） <b class="text-danger">消息下发位置说明：对于已关注公众号的，消息将下发到公众号会话里；未关注公众号的，将下发到服务通知。</b> 公众号或网页使用一次性订阅消息流程如下： 第一步：需要用户同意授权，获取一次给用户推送一条订阅模板消息的机会 在确保微信公众帐号拥有订阅消息授权的权限的前提下（已认证的公众号即有权限，可登录公众平台在接口权限列表处查看），引导用户在微信客户端打开如下链接： https://mp.weixin.qq.com/mp/subscribemsg?action=get_confirm&appid=wxaba38c7f163da69b&scene=1000&template_id=1uDxHNXwYQfBmXOfPJcjAS3FynHArD8aWMEFNRGSbCc&redirect_url=http%3a%2f%2fsupport.qq.com&reserved=test#wechat_redirect
                    公众号调用接口并不是无限制的。为了防止公众号的程序错误而引发微信服务器负载异常，默认情况下，每个公众号调用接口都不能超过一定限制，<b class="text-danger">当超过一定限制时，调用对应接口会收到如下错误返回码</b>： {"errcode":45009,"errmsg":"api freq out of limit"} 开发者可以登录微信公众平台，在帐号后台开发者中心接口权限模板查看帐号各接口当前的日调用上限和实时调用量，<b class="text-danger">对于认证帐号可以对实时调用量清零</b>，说明如下： 1、由于指标计算方法或统计时间差异，实时调用量数据可能会出现误差，一般在1%以内。 2、每个帐号<b class="text-danger">每月共10次清零</b>操作机会，清零<b class="text-danger">生效一次即用掉一次机会</b>（10次包括了平台上的清零和调用接口API的清零）。 3、第三方帮助公众号调用时，实际上是在消耗公众号自身的quota。 4、每个有接口调用限额的接口都可以进行清零操作。
                    如果用户在微信客户端中访问第三方网页，公众号可以通过微信网页授权机制，来获取用户基本信息，进而实现业务逻辑。 关于网页授权回调域名的说明 1、在微信公众号请求用户网页授权之前，开发者需要先到公众平台官网中的“开发 - 接口权限 - 网页服务 - 网页帐号 - 网页授权获取用户基本信息”的配置选项中，<b class="text-danger">修改授权回调域名。请注意，这里填写的是域名（是一个字符串），而不是URL，因此请勿加 http:// 等协议头；</b> 2、授权回调域名配置规范为全域名，比如需要网页授权的域名为：www.qq.com，配置以后此域名下面的页面http://www.qq.com/music.html 、 http://www.qq.com/login.html 都可以进行OAuth2.0鉴权。但http://pay.qq.com 、 http://music.qq.com 、 http://qq.com 无法进行OAuth2.0鉴权 3、如果公众号登录授权给了第三方开发者来进行管理，则不必做任何设置，由第三方代替公众号实现网页授权即可 关于网页授权的两种scope的区别说明 <b class="text-danger">1、以snsapi_base为scope发起的网页授权，是用来获取进入页面的用户的openid的，并且是静默授权并自动跳转到回调页的。用户感知的就是直接进入了回调页（往往是业务页面） 2、以snsapi_userinfo为scope发起的网页授权，是用来获取用户的基本信息的。但这种授权需要用户手动同意，并且由于用户同意过，所以无须关注，就可在授权后获取该用户的基本信息。 </b>3、用户管理类接口中的“获取用户基本信息接口”，是在用户和公众号产生消息交互或关注后事件推送后，才能根据用户OpenID来获取用户基本信息。这个接口，包括其他微信接口，都是需要该用户（即openid）关注了公众号后，才能调用成功的。 关于网页授权access_token和普通access_token的区别 1、微信网页授权是通过OAuth2.0机制实现的，在用户授权给公众号后，公众号可以获取到一个网页授权特有的接口调用凭证（网页授权access_token），通过网页授权access_token可以进行授权后接口调用，如获取用户基本信息； 2、其他微信接口，需要通过基础支持中的“获取access_token”接口来获取到的普通access_token调用。 关于UnionID机制 1、请注意，<b class="text-danger">网页授权获取用户基本信息也遵循UnionID机制</b>。即如果开发者有在多个公众号，或在公众号、移动应用之间统一用户帐号的需求，需要前往微信开放平台（open.weixin.qq.com）绑定公众号后，才可利用UnionID机制来满足上述需求。 2、UnionID机制的作用说明：如果开发者拥有多个移动应用、网站应用和公众帐号，可通过获取用户基本信息中的unionid来区分用户的唯一性，因为同一用户，对同一个微信开放平台下的不同应用（移动应用、网站应用和公众帐号），unionid是相同的。 关于特殊场景下的静默授权 1、上面已经提到，对于以snsapi_base为scope的网页授权，就静默授权的，用户无感知； 2、对于已关注公众号的用户，如果用户从公众号的会话或者自定义菜单进入本公众号的网页授权页，即使是scope为snsapi_userinfo，也是静默授权，用户无感知。 具体而言，网页授权流程分为四步： 1、引导用户进入授权页面同意授权，获取code 2、通过code换取网页授权access_token（与基础支持中的access_token不同） 3、如果需要，开发者可以刷新网页授权access_token，避免过期 4、通过网页授权access_token和openid获取用户基本信息（支持UnionID机制）
                    <b class="text-danger">WeUI 是一套同微信原生视觉体验一致的基础样式库</b>，由微信官方设计团队为微信内网页和微信小程序量身设计，令用户的使用感知更加统一。在微信网页或小程序中使用 WeUI，有如下优势： 1.同微信客户端一致的视觉效果，令所有微信用户都能更容易地使用你的网站或小程序 2.便捷获取快速使用，降低开发和设计成本 3.微信设计团队精心打造，清晰明确，简洁大方 该样式库目前包含表单、基础组件、操作反馈、导航相关、搜索相关、层级规范等内容，已经在GitHub上开源。访问 http://weui.io或微信扫码即可预览。
                    微信JS-SDK是微信公众平台 面向网页开发者提供的基于微信内的网页开发工具包。 通过使用微信JS-SDK，<b class="text-danger">网页开发者可借助微信高效地使用拍照、选图、语音、位置等手机系统的能力，同时可以直接使用微信分享、扫一扫、卡券、支付等微信特有的能力，为微信用户提供更优质的网页体验</b>。 此文档面向网页开发者介绍微信JS-SDK如何使用及相关注意事项。 JSSDK使用步骤 步骤一：绑定域名 先登录微信公众平台进入“公众号设置”的“功能设置”里填写“JS接口安全域名”。 备注：登录后可在“开发者中心”查看对应的接口权限。 步骤二：引入JS文件 在需要调用JS接口的页面引入如下JS文件，（支持https）：http://res.wx.qq.com/open/js/jweixin-1.6.0.js 如需进一步提升服务稳定性，当上述资源不可访问时，可改访问：http://res2.wx.qq.com/open/js/jweixin-1.6.0.js （支持https）。 备注：支持使用 AMD/CMD 标准模块加载方法加载 步骤三：通过config接口注入权限验证配置 所有需要使用JS-SDK的页面必须先注入配置信息，否则将无法调用（同一个url仅需调用一次，对于变化url的SPA的web app可在每次url变化时进行调用,目前Android微信客户端不支持pushState的H5新特性，所以使用pushState来实现web app的页面会导致签名失败，此问题会在Android6.2中修复）。 签名算法见文末的附录1，所有JS接口列表见文末的附录2 步骤四：通过ready接口处理成功验证 步骤五：通过error接口处理失败验证
                    为帮助开发者更方便、更安全地开发和调试基于微信的网页，我们推出了 web 开发者工具。它是一个桌面应用，通过模拟微信客户端的表现，使得开发者可以使用这个工具方便地在 PC 或者 Mac 上进行开发和调试工作。立即下载体验。 你可以： 1.使用自己的微信号来调试微信网页授权 2.调试、检验页面的 JS-SDK 相关功能与权限，模拟大部分 SDK 的输入和输出 3.使用基于 weinre 的移动调试功能（仅0.5.0-0.7.0版本支持），支持X5 Blink内核的远程调试 4.利用集成的 Chrome DevTools 协助开发 该工具界面主要由几大部分组成，
                </p>
            </div>
            <div class="blogFooter">
                <Tag color="green">收集</Tag>
                <Tag color="cyan">学习</Tag>
                <Tag color="blue">增长</Tag>
            </div>
        </div>
    </div>
</template>
<script>
export default {
    data () {
        return {}
    },
    methods: {
    },
    mounted () {
    }
}
</script>
